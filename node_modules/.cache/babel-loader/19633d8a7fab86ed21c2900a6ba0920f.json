{"ast":null,"code":"import _classCallCheck from \"/home/eksad/Documents/Projek Frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/eksad/Documents/Projek Frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/eksad/Documents/Projek Frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/eksad/Documents/Projek Frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/eksad/Documents/Projek Frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/eksad/Documents/Projek Frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/eksad/Documents/Projek Frontend/src/components/content/krs/CreateKrs.js\";\nimport React from 'react';\nimport { Modal, ModalBody, ModalFooter, ModalHeader, Button } from 'reactstrap';\nimport axios from 'axios';\nimport apiconfig from '../../../configs/api.config.json';\nimport { Link } from 'react-router-dom';\nimport Typography from '@material-ui/core/Typography';\n\nvar CreateKrs =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CreateKrs, _React$Component);\n\n  function CreateKrs(props) {\n    var _this;\n\n    _classCallCheck(this, CreateKrs);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CreateKrs).call(this, props)); // let number=this.props.company\n    // console.log(number)\n    //let userdata=JSON.parse(localStorage.getItem(apiconfig.LS.USERDATA))\n    // let userdata=\"\"\n    // if(localStorage.getItem(apiconfig.LS.TOKEN)!=null){\n    //let   userdata =JSON.parse(localStorage.getItem(apiconfig.LS.USERDATA))\n    //}\n\n    _this.changeCheck = function (e) {\n      var matkuls = _this.state.matakuliahs;\n      matkuls.forEach(function (matkul) {\n        return matkul.isChecked = e.target.checked;\n      });\n\n      if (e.target.checked) {\n        _this.state.formdata.kdMatkul = [];\n        matkuls.forEach(function (matkul) {\n          return _this.state.formdata.kdMatkul.push(matkul.value);\n        });\n      } else {\n        _this.state.formdata.kdMatkul = [];\n      }\n\n      _this.setState({\n        matakuliahs: matkuls\n      }); //console.log(\"pilih \"+JSON.stringify(this.state.formdata))\n\n    };\n\n    _this.state = {\n      formdata: {\n        id: '',\n        kode: '',\n        nim: '',\n        kdMatkul: [],\n        sks: '0',\n        semester: '0'\n      },\n      matakuliahs: [{\n        name: 'kdMatkul',\n        value: \"mk01\",\n        isChecked: false,\n        label: 'Fisika Dasar'\n      }, {\n        name: 'kdMatkul',\n        value: \"mk02\",\n        isChecked: false,\n        label: 'Kimia Dasar'\n      }, {\n        name: 'kdMatkul',\n        value: \"mk03\",\n        isChecked: false,\n        label: 'Bahasa Inggris'\n      }, {\n        name: 'kdMatkul',\n        value: \"mk04\",\n        isChecked: false,\n        label: 'Bahasa Indonesia'\n      }, {\n        name: 'kdMatkul',\n        value: \"mk05\",\n        isChecked: false,\n        label: 'Agama Islam'\n      }, {\n        name: 'kdMatkul',\n        value: \"mk06\",\n        isChecked: false,\n        label: 'Sosial Budaya'\n      }] // let number=this.state.company.length\n\n    };\n    _this.submitHandler = _this.submitHandler.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.changeHandler = _this.changeHandler.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(CreateKrs, [{\n    key: \"changeHandler\",\n    value: function changeHandler(e) {\n      var tmp = this.state.formdata;\n\n      if (e.target.type === 'checkbox') {\n        // Kalo typenya chackbox\n        //tmp[e.target.name]=[] // hapus semua dulu\n        this.state.matakuliahs.map(function (row, i) //Perulangan matakuliah\n        {\n          if (row.value === e.target.value) {\n            //klo value row sama ama value objek pilih\n            row.isChecked = !row.isChecked; //Ubah nilai isChecknya\n\n            if (row.isChecked) // Jika nilai isChecknya true \n              tmp[e.target.name].push(e.target.value);else //Kalo false, hapus\n              tmp[e.target.name].splice(tmp.kdMatkul.indexOf(e.target.value), 1);\n          }\n        }); //console.log(\"pilih \"+JSON.stringify(this.state.matakuliahs))\n        //console.log(\"pilih \"+JSON.stringify(tmp))\n      } else {\n        tmp[e.target.name] = e.target.value;\n      }\n\n      this.setState({\n        formdata: tmp\n      });\n    }\n  }, {\n    key: \"submitHandler\",\n    value: function submitHandler() {\n      var _this2 = this;\n\n      //alert(JSON.stringify(this.state.formdata))\n      //let token=localStorage.getItem(apiconfig.LS.TOKEN)\n      var dataudahterkirim = [];\n      this.state.formdata.kdMatkul.forEach(function (kd) {\n        var datas = _this2.state.formdata;\n        datas['kdMatkul'] = kd;\n        alert(JSON.stringify(datas));\n        var opsi = {\n          url: apiconfig.BASE_URL + apiconfig.ENDPOINTS.KRS,\n          method: \"post\",\n          headers: {\n            //\"Authorization\": token,\n            \"Content-Type\": \"application/json\"\n          },\n          data: datas\n        };\n\n        if (dataudahterkirim.kdMatkul.indexOf(kd) === -1) {\n          axios(opsi).then(function (response) {\n            if (response.data.parameterNilai === 1) {\n              //console.log(response)\n              _this2.props.history.push('/listKrs');\n\n              _this2.setState({\n                viewKrs: false\n              });\n            } else {\n              alert(response.status);\n            }\n          }).catch(function (error) {\n            console.log(error);\n          });\n        }\n\n        dataudahterkirim.push(kd);\n      });\n      alert('Success');\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(Modal, {\n        isOpen: this.props.create,\n        className: this.props.className,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(ModalHeader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        variant: \"display1\",\n        align: \"center\",\n        gutterBottom: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, \"Add KRS\")), React.createElement(ModalBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        class: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"input-group mb-3 input-group-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        for: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, \"ID Krs\", React.createElement(\"input\", {\n        type: \"text\",\n        class: \"form-control\",\n        placeholder: \"ID Krs\",\n        readOnly: true,\n        name: \"id\",\n        value: this.state.formdata.id,\n        onChange: this.changeHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        class: \"col-md-12 input-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        for: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, \"Kode Krs :\", React.createElement(\"input\", {\n        type: \"text\",\n        class: \"form-control\",\n        placeholder: \"Kode Krs\",\n        name: \"kode\",\n        value: this.state.formdata.kode,\n        onChange: this.changeHandler,\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        class: \"col-md-12 input-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        for: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, \"NIM :\", React.createElement(\"input\", {\n        type: \"text\",\n        class: \"form-control\",\n        placeholder: \"NIM\",\n        name: \"nim\",\n        value: this.state.formdata.nama,\n        onChange: this.changeHandler,\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        class: \"col-md-6 row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        class: \"col-md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, \"Mata Kuliah Yang Diambil :\"), React.createElement(\"input\", {\n        type: \"checkbox\",\n        id: \"togcek\",\n        onChange: this.changeCheck,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }), \"Pilih Semua\", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          background: 'gray',\n          height: '2px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }), this.state.matakuliahs.map(function (row, x) {\n        return React.createElement(\"label\", {\n          class: \"col-md-12\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"checkbox\",\n          name: row.name,\n          value: row.value,\n          checked: row.isChecked,\n          onChange: _this3.changeHandler,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164\n          },\n          __self: this\n        }), row.label);\n      })), React.createElement(\"div\", {\n        class: \"col-md-12 input-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, \"Semester :\", React.createElement(\"input\", {\n        type: \"number\",\n        name: \"semester\",\n        onChange: this.changeHandler,\n        class: \"form-control\",\n        value: this.state.formdata.semester,\n        required: true,\n        min: \"1\",\n        max: \"20\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        class: \"col-md-12 input-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, \"SKS :\", React.createElement(\"input\", {\n        type: \"number\",\n        name: \"sks\",\n        onChange: this.changeHandler,\n        class: \"form-control\",\n        value: this.state.formdata.sks,\n        required: true,\n        min: \"1\",\n        max: \"29\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      })))), React.createElement(\"form\", {\n        class: \"form-inline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"input-group mb-3 input-group-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }))), React.createElement(ModalFooter, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(Button, {\n        color: \"primary\",\n        onClick: this.submitHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, \"Save\"), React.createElement(Button, {\n        color: \"warning\",\n        onClick: this.props.closeHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, \"Cancel\")));\n    }\n  }]);\n\n  return CreateKrs;\n}(React.Component);\n\nexport default CreateKrs;","map":{"version":3,"sources":["/home/eksad/Documents/Projek Frontend/src/components/content/krs/CreateKrs.js"],"names":["React","Modal","ModalBody","ModalFooter","ModalHeader","Button","axios","apiconfig","Link","Typography","CreateKrs","props","changeCheck","e","matkuls","state","matakuliahs","forEach","matkul","isChecked","target","checked","formdata","kdMatkul","push","value","setState","id","kode","nim","sks","semester","name","label","submitHandler","bind","changeHandler","tmp","type","map","row","i","splice","indexOf","dataudahterkirim","kd","datas","alert","JSON","stringify","opsi","url","BASE_URL","ENDPOINTS","KRS","method","headers","data","then","response","parameterNilai","history","viewKrs","status","catch","error","console","log","create","className","nama","background","height","x","closeHandler","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { Modal, ModalBody, ModalFooter, ModalHeader, Button } from 'reactstrap'\nimport axios from 'axios'\nimport apiconfig from '../../../configs/api.config.json'\nimport { Link } from 'react-router-dom'\nimport Typography from '@material-ui/core/Typography'\n\nclass CreateKrs extends React.Component{\n    constructor (props){\n        super(props)\n        // let number=this.props.company\n        // console.log(number)\n        //let userdata=JSON.parse(localStorage.getItem(apiconfig.LS.USERDATA))\n        // let userdata=\"\"\n       \n        // if(localStorage.getItem(apiconfig.LS.TOKEN)!=null){\n         //let   userdata =JSON.parse(localStorage.getItem(apiconfig.LS.USERDATA))\n        //}\n        this.state={\n            formdata:{\n                id:'',\n                kode:'',\n                nim:'',\n                kdMatkul:[],\n                sks: '0',\n                semester: '0'\n            },\n            matakuliahs : [\n                {name: 'kdMatkul', value:\"mk01\", isChecked: false, label: 'Fisika Dasar'},\n                {name: 'kdMatkul', value:\"mk02\", isChecked: false, label: 'Kimia Dasar'},\n                {name: 'kdMatkul', value:\"mk03\", isChecked: false, label: 'Bahasa Inggris'},\n                {name: 'kdMatkul', value:\"mk04\", isChecked: false, label: 'Bahasa Indonesia'},\n                {name: 'kdMatkul', value:\"mk05\", isChecked: false, label: 'Agama Islam'},\n                {name: 'kdMatkul', value:\"mk06\", isChecked: false, label: 'Sosial Budaya'}\n            ]\n        }\n        // let number=this.state.company.length\n        this.submitHandler=this.submitHandler.bind(this)\n        this.changeHandler=this.changeHandler.bind(this)\n    }\n    \n    changeHandler(e){\n        let tmp=this.state.formdata\n        if(e.target.type==='checkbox'){ // Kalo typenya chackbox\n            //tmp[e.target.name]=[] // hapus semua dulu\n            this.state.matakuliahs.map((row,i)=> //Perulangan matakuliah\n                {\n                    if(row.value===e.target.value){ //klo value row sama ama value objek pilih\n                        row.isChecked=!row.isChecked //Ubah nilai isChecknya\n                        if(row.isChecked)   // Jika nilai isChecknya true \n                            tmp[e.target.name].push(e.target.value)\n                        else    //Kalo false, hapus\n                            tmp[e.target.name].splice(tmp.kdMatkul.indexOf(e.target.value),1)\n                    }\n                }\n            )\n            //console.log(\"pilih \"+JSON.stringify(this.state.matakuliahs))\n            //console.log(\"pilih \"+JSON.stringify(tmp))\n        }else{\n            tmp[e.target.name]=e.target.value\n        }\n        \n        this.setState({\n            formdata:tmp\n        })\n    }\n    submitHandler(){\n        //alert(JSON.stringify(this.state.formdata))\n        //let token=localStorage.getItem(apiconfig.LS.TOKEN)\n        let dataudahterkirim = []\n        this.state.formdata.kdMatkul.forEach(kd =>\n            {\n            let datas = this.state.formdata\n            datas['kdMatkul']=kd\n            alert(JSON.stringify(datas))\n            const opsi = {\n                url: apiconfig.BASE_URL+apiconfig.ENDPOINTS.KRS,\n                method: \"post\",\n                headers:{\n                    //\"Authorization\": token,\n                    \"Content-Type\" : \"application/json\"\n                },\n                data: datas\n            }\n            if(dataudahterkirim.kdMatkul.indexOf(kd)===-1){\n                axios(opsi)\n                .then((response)=>{\n                    if(response.data.parameterNilai===1){\n                        \n                        //console.log(response)\n                        this.props.history.push('/listKrs')\n                        this.setState({\n                            viewKrs : false\n                        })\n                    } else {\n                        alert(response.status)\n                    }\n                })\n                .catch((error)=>{\n                    console.log(error);            \n                })\n            }\n            dataudahterkirim.push(kd)\n            }\n        )\n        alert('Success')\n    }\n\n    changeCheck = (e) => {\n        let matkuls = this.state.matakuliahs\n        matkuls.forEach(matkul => matkul.isChecked =  \n        e.target.checked)\n        if(e.target.checked){ \n            this.state.formdata.kdMatkul=[]\n            matkuls.forEach(matkul => \n            this.state.formdata.kdMatkul.push(matkul.value))\n        }else{\n            this.state.formdata.kdMatkul=[]\n        } \n        this.setState({\n            matakuliahs: matkuls\n        })\n        //console.log(\"pilih \"+JSON.stringify(this.state.formdata))\n    }\n\n    render(){\n        \n        return(\n            \n            <Modal isOpen={this.props.create} className={this.props.className}>\n                <ModalHeader> \n                    <Typography variant='display1' align='center' gutterBottom>\n                        Add KRS\n                    </Typography>\n                </ModalHeader>\n                <ModalBody >\n                <form class=\"\">\n                <div class =\"input-group mb-3 input-group-sm\">\n                    <label for=\"text\">ID Krs\n                    <input type=\"text\" class=\"form-control\" placeholder=\"ID Krs\" readOnly\n                    name=\"id\" value={this.state.formdata.id} onChange={this.changeHandler} />\n                    </label>\n                </div>\n                <div class=\"col-md-12 input-group\">\n                    <label for=\"text\">Kode Krs :\n                    <input type=\"text\" class=\"form-control\" placeholder=\"Kode Krs\" \n                    name=\"kode\" value={this.state.formdata.kode} onChange={this.changeHandler} required/>\n                    </label>\n                </div>\n                <div class=\"col-md-12 input-group\">\n                    <label for=\"text\">NIM :\n                    <input type=\"text\" class=\"form-control\" placeholder=\"NIM\" \n                    name=\"nim\" value={this.state.formdata.nama} onChange={this.changeHandler} required/>\n                    </label>\n                </div>\n                <div class=\"col-md-6 row\">\n                    <span class=\"col-md-12\">Mata Kuliah Yang Diambil :</span>\n                     <input type=\"checkbox\" id=\"togcek\" onChange={this.changeCheck} />Pilih Semua<br></br>\n                     <div style={{background:'gray',height:'2px'}} ></div>\n                        {/* <Checkbox /> */}\n                     {\n                         this.state.matakuliahs.map((row,x)=>\n                            <label class=\"col-md-12\">\n                            <input type=\"checkbox\" name={row.name} value={row.value} checked={row.isChecked} onChange={this.changeHandler} />\n                            {row.label}\n                            </label>\n                        )\n                    }\n                        \n                     </div>\n                     <div class=\"col-md-12 input-group\">\n                        <label>Semester : \n                            <input type=\"number\" name=\"semester\" onChange={this.changeHandler} class=\"form-control\" value={this.state.formdata.semester} required min=\"1\" max=\"20\"  />\n                        </label> \n                    </div>\n                    <div class=\"col-md-12 input-group\">\n                        <label>SKS :\n                            <input type=\"number\" name=\"sks\" onChange={this.changeHandler} class=\"form-control\" value={this.state.formdata.sks} required min=\"1\" max=\"29\"  />\n                        </label> \n                    </div>\n                    </form>\n                    <form class=\"form-inline\">\n                    <div class =\"input-group mb-3 input-group-sm\">\n                    \n                    {/* <label for=\"text\">address</label>\n                    <textarea type=\"text-area\" class=\"form-control\" placeholder=\"address\" \n                    name=\"address\" value={this.state.formdata.address} onChange={this.changeHandler} required/>\n                    */}\n                   </div>\n                   {/* <form class=\"form-inline\">\n                    <div class =\"input-group mb-3 input-group-sm\">\n                    <label>phone</label>\n                    <input type=\"text\" class=\"form-control\" placeholder=\"phone\" \n                    name=\"phone\" value={this.state.formdata.phone} onChange={this.changeHandler} required/>\n                   \n                       </div>\n                       </form> */}\n                    </form>\n                </ModalBody>\n                <ModalFooter>\n                    <Button color=\"primary\" onClick ={this.submitHandler}>Save</Button>\n                    <Button color=\"warning\" onClick={this.props.closeHandler}>Cancel</Button>\n                </ModalFooter>\n        </Modal>\n        )\n    }\n}\nexport default CreateKrs"]},"metadata":{},"sourceType":"module"}