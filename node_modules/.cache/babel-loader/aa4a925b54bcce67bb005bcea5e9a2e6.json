{"ast":null,"code":"import _classCallCheck from \"/home/eksad/Documents/Projek Frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/eksad/Documents/Projek Frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/eksad/Documents/Projek Frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/eksad/Documents/Projek Frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/eksad/Documents/Projek Frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/eksad/Documents/Projek Frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/eksad/Documents/Projek Frontend/src/components/content/menu/listMenu.js\";\nimport React from 'react';\nimport apiconfig from '../../../configs/api.config.json';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport EditMenu from './editMenu';\nimport CreateMenu from './createMenu';\nimport { Alert } from 'reactstrap';\nimport DeleteMenu from './deleteMenu';\nimport ViewMenu from './viewMenu';\nimport MUIDataTables from \"mui-datatables\";\n\nvar listMenu =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(listMenu, _React$Component);\n\n  function listMenu(props) {\n    var _this;\n\n    _classCallCheck(this, listMenu);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(listMenu).call(this, props));\n    _this.state = {\n      showCreateMenu: false,\n      menu: [],\n      currentMenu: {},\n      alertData: {\n        status: 0,\n        message: '' // unit:[]\n\n      }\n    };\n    _this.showHandler = _this.showHandler.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.submitHandler = _this.submitHandler.bind(_assertThisInitialized(_assertThisInitialized(_this))); // this.changeHandler=this.changeHandler.bind(this)\n\n    _this.unitHandler = _this.unitHandler.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.closeModalHandler = _this.closeModalHandler.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.closeHandler = _this.closeHandler.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.deleteHandler = _this.deleteHandler.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.deleteModalHandler = _this.deleteModalHandler.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.viewModalHandler = _this.viewModalHandler.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.editModalHandler = _this.editModalHandler.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.modalStatus = _this.modalStatus.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(listMenu, [{\n    key: \"viewModalHandler\",\n    value: function viewModalHandler(id) {\n      var tmp = {};\n      this.state.menu.map(function (row) {\n        if (id == row.id) {\n          tmp = row;\n        }\n      });\n      this.setState({\n        currentMenu: tmp,\n        viewMenu: true\n      });\n    }\n  }, {\n    key: \"deleteModalHandler\",\n    value: function deleteModalHandler(id) {\n      var tmp = {};\n      this.state.menu.map(function (row) {\n        if (id == row.id) {\n          tmp = {\n            id: row.id,\n            iconMenu: row.iconMenu,\n            textMenu: row.textMenu,\n            pathMenu: row.pathMenu,\n            status: true\n          };\n        }\n      });\n      this.setState({\n        currentMenu: tmp,\n        deleteMenu: true\n      });\n    }\n  }, {\n    key: \"editModalHandler\",\n    value: function editModalHandler(id) {\n      var tmp = {};\n      this.state.menu.map(function (row) {\n        if (id == row.id) {\n          tmp = row;\n        }\n      });\n      this.setState({\n        currentMenu: tmp,\n        editMenu: true\n      });\n    }\n  }, {\n    key: \"closeModalHandler\",\n    value: function closeModalHandler() {\n      this.setState({\n        viewMenu: false,\n        editMenu: false,\n        deleteMenu: false\n      });\n    }\n  }, {\n    key: \"showHandler\",\n    value: function showHandler() {\n      this.setState({\n        showCreateMenu: true\n      });\n    }\n  }, {\n    key: \"closeHandler\",\n    value: function closeHandler(status, message) {\n      this.setState({\n        showCreateUser: false\n      });\n    } // changeHandler(e){\n    //     let tmp=this.state.formdata\n    //     tmp[e.target.name]=e.target.value\n    //     this.setState({\n    //         formdata:tmp\n    //     })\n    // }\n\n  }, {\n    key: \"unitHandler\",\n    value: function unitHandler(e) {\n      var tmp = this.state.formdata;\n      tmp.m_unit_id = e.target.value;\n      this.setState({\n        formdata: tmp\n      });\n    }\n  }, {\n    key: \"submitHandler\",\n    value: function submitHandler() {\n      var _this2 = this;\n\n      var token = localStorage.getItem(apiconfig.LS.TOKEN);\n      var option = {\n        url: apiconfig.BASE_URL + apiconfig.ENDPOINTS.MENU,\n        method: \"post\",\n        headers: {\n          \"Authorization\": token,\n          \"Content-Type\": \"application/json\"\n        },\n        data: this.state.formdata\n      };\n      axios(option).then(function (response) {\n        if (response.data.code === 200) {\n          alert('Success');\n\n          _this2.props.history.push('/dashboard');\n        } else {\n          alert(response.data.message);\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"getListMenu\",\n    value: function getListMenu() {\n      var _this3 = this;\n\n      //let token = localStorage.getItem(apiconfig.LS.TOKEN)\n      // let option = {\n      //     url: apiconfig.BASE_URL+apiconfig.ENDPOINTS.COMPANY,\n      //     method: \"get\",\n      //     headers: {\n      //         \"Authorization\": token\n      //     }\n      // }\n      // axios(option)\n      axios({\n        method: 'GET',\n        url: apiconfig.BASE_URL + apiconfig.ENDPOINTS.MENU,\n        headers: {\n          'Content-Type': 'application/json',\n          'Accepted-Language': 'application/json'\n        }\n      }).then(function (response) {\n        _this3.setState({\n          menu: response.data\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    } // componentWillMount(){\n    //     //this.loadData();\n    //     this.getListCompany()\n    // }\n    // componentDidMount(){\n    //     var self = this;\n    // \t$('#mytable').dataTable({\n    // \t  \"sPaginationType\": \"bootstrap\",\n    // \t  \"bAutoWidth\": false,\n    // \t  \"bDestroy\": true,\n    // \t  \"fnDrawCallback\": function() {\n    //         \tself.forceUpdate();\n    //       },\n    // \t});\n    // }\n    // componentDidUpdate(){\n    //     $('#mytable').dataTable({\n    //      \"sPaginationType\": \"bootstrap\",\n    //      \"bAutoWidth\": false,\n    //      \"bDestroy\": true,\n    //    });\n    // }\n\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getListMenu();\n    }\n  }, {\n    key: \"deleteHandler\",\n    value: function deleteHandler(param) {\n      var _this4 = this;\n\n      var token = localStorage.getItem(apiconfig.LS.TOKEN);\n      var option = {\n        url: apiconfig.BASE_URL + apiconfig.ENDPOINTS.COMPANY + '/' + param,\n        method: \"delete\",\n        headers: {\n          \"Authorization\": token\n        }\n      };\n      axios(option).then(function (response) {\n        var currentindex = -1;\n\n        _this4.state.company.map(function (ele, idx) {\n          if (ele._id == param) {\n            currentindex = idx;\n\n            _this4.props.history.goBack();\n          }\n        });\n\n        var tmp = _this4.state.company;\n        tmp.splice(currentindex, 1);\n\n        _this4.setState({\n          company: tmp\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"modalStatus\",\n    value: function modalStatus(status, message) {\n      this.setState({\n        alertData: {\n          status: status,\n          message: message\n        },\n        showCreateMenu: false,\n        viewMenu: false,\n        editMenu: false,\n        deleteMenu: false\n      });\n      this.getListMenu();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var columns = [\"No\", \"Menu\", \"Path Menu\", \"Action\"];\n      var data = [];\n      this.state.menu.map(function (row) {\n        var tmp = [];\n        tmp.push(row.id, row.textMenu, row.pathMenu, React.createElement(Link, {\n          to: \"#\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 240\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          onClick: function onClick() {\n            _this5.viewModalHandler(row.id);\n          },\n          className: \"fa fa-search\",\n          style: {\n            fontSize: '18px',\n            paddingRight: '30px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 241\n          },\n          __self: this\n        }), React.createElement(\"span\", {\n          onClick: function onClick() {\n            _this5.editModalHandler(row.id);\n          },\n          class: \"fa fa-edit\",\n          style: {\n            fontSize: '18px',\n            paddingRight: '30px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 243\n          },\n          __self: this\n        }), React.createElement(\"span\", {\n          onClick: function onClick() {\n            _this5.deleteModalHandler(row.id);\n          },\n          class: \"fa fa-trash\",\n          style: {\n            fontSize: '18px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 245\n          },\n          __self: this\n        })));\n        data.push(tmp);\n      });\n      var options = {\n        filter: false,\n        responsive: \"scroll\",\n        print: false,\n        download: false,\n        selectableRows: false,\n        viewColumns: false\n      };\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }, \"List Menu\"), this.state.alertData.status == 1 ? React.createElement(Alert, {\n        color: \"success\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }, \" \", this.state.alertData.message, \" \") : '', this.state.alertData.status == 2 ? React.createElement(Alert, {\n        color: \"danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }, \" \", this.state.alertData.message, \" \") : '', React.createElement(\"button\", {\n        type: \"button\",\n        class: \"btn btn-primary float-right\",\n        onClick: this.showHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        class: \"fa fa-plus\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }), \" Add \"), React.createElement(CreateMenu, {\n        create: this.state.showCreateMenu,\n        closeHandler: this.closeHandler,\n        modalStatus: this.modalStatus,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      }), React.createElement(ViewMenu, {\n        view: this.state.viewMenu,\n        closeModalHandler: this.closeModalHandler,\n        menu: this.state.currentMenu,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }), React.createElement(DeleteMenu, {\n        delete: this.state.deleteMenu,\n        menu: this.state.currentMenu,\n        closeModalHandler: this.closeModalHandler,\n        modalStatus: this.modalStatus,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }), React.createElement(EditMenu, {\n        edit: this.state.editMenu,\n        closeModalHandler: this.closeModalHandler,\n        menutest: this.state.currentMenu,\n        modalStatus: this.modalStatus,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }), React.createElement(MUIDataTables, {\n        data: data,\n        columns: columns,\n        options: options,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return listMenu;\n}(React.Component);\n\nexport default listMenu;","map":{"version":3,"sources":["/home/eksad/Documents/Projek Frontend/src/components/content/menu/listMenu.js"],"names":["React","apiconfig","axios","Link","EditMenu","CreateMenu","Alert","DeleteMenu","ViewMenu","MUIDataTables","listMenu","props","state","showCreateMenu","menu","currentMenu","alertData","status","message","showHandler","bind","submitHandler","unitHandler","closeModalHandler","closeHandler","deleteHandler","deleteModalHandler","viewModalHandler","editModalHandler","modalStatus","id","tmp","map","row","setState","viewMenu","iconMenu","textMenu","pathMenu","deleteMenu","editMenu","showCreateUser","e","formdata","m_unit_id","target","value","token","localStorage","getItem","LS","TOKEN","option","url","BASE_URL","ENDPOINTS","MENU","method","headers","data","then","response","code","alert","history","push","catch","error","console","log","getListMenu","param","COMPANY","currentindex","company","ele","idx","_id","goBack","splice","columns","fontSize","paddingRight","options","filter","responsive","print","download","selectableRows","viewColumns","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport apiconfig from '../../../configs/api.config.json'\nimport axios from 'axios'\nimport { Link } from 'react-router-dom'\nimport EditMenu from './editMenu'\nimport CreateMenu from './createMenu'\nimport { Alert } from 'reactstrap'\nimport DeleteMenu from './deleteMenu'\nimport ViewMenu from './viewMenu'\nimport MUIDataTables from \"mui-datatables\"\n\n\nclass listMenu extends React.Component {\n    constructor(props){\n\n        super(props)\n        this.state={\n\n            showCreateMenu:false,\n            menu:[],\n            currentMenu:{},\n            alertData: {\n                status: 0,\n                message: ''\n            }\n            // unit:[]\n        }\n        this.showHandler=this.showHandler.bind(this)\n        this.submitHandler=this.submitHandler.bind(this)\n        // this.changeHandler=this.changeHandler.bind(this)\n        this.unitHandler=this.unitHandler.bind(this)\n        this.closeModalHandler = this.closeModalHandler.bind(this)\n        this.closeHandler=this.closeHandler.bind(this)\n        this.deleteHandler=this.deleteHandler.bind(this)\n        this.deleteModalHandler = this.deleteModalHandler.bind(this)\n        this.viewModalHandler = this.viewModalHandler.bind(this)\n        this.editModalHandler = this.editModalHandler.bind(this)\n        this.modalStatus = this.modalStatus.bind(this)\n    }\n\n    viewModalHandler(id) {\n        let tmp = {}\n        this.state.menu.map((row) => {\n            if (id == row.id) {\n                tmp = row\n            }\n        })\n        this.setState({\n            currentMenu : tmp,\n            viewMenu : true\n        })\n    }\n\n    deleteModalHandler(id) {\n        let tmp = {}\n        this.state.menu.map((row) => {\n            if (id == row.id) {\n                tmp=({id:row.id,iconMenu:row.iconMenu,textMenu:row.textMenu,pathMenu:row.pathMenu,status:true})\n            }\n        })\n        this.setState({\n            currentMenu : tmp,\n            deleteMenu : true\n        })\n    }\n\n    editModalHandler(id) {\n        let tmp = {}\n        this.state.menu.map((row) => {\n            if (id == row.id) {\n                tmp =row\n            }\n        })\n        this.setState({\n            currentMenu : tmp,\n            editMenu : true\n        })\n    }\n\n    closeModalHandler() {\n        this.setState({\n            viewMenu : false,\n            editMenu : false,\n            deleteMenu : false\n        })\n    }\n\n    showHandler(){\n        this.setState({showCreateMenu:true})\n    }\n\n    closeHandler(status, message){\n        this.setState({showCreateUser:false})\n    }\n\n    // changeHandler(e){\n    //     let tmp=this.state.formdata\n    //     tmp[e.target.name]=e.target.value\n    //     this.setState({\n    //         formdata:tmp\n    //     })\n    // }\n\n    unitHandler(e){\n        let tmp=this.state.formdata\n        tmp.m_unit_id=e.target.value\n        this.setState({\n            formdata:tmp\n        })\n    }\n\n    submitHandler(){\n        let token=localStorage.getItem(apiconfig.LS.TOKEN)\n        let option={\n            url: apiconfig.BASE_URL+apiconfig.ENDPOINTS.MENU,\n            method: \"post\",\n            headers:{\n                \"Authorization\": token,\n                \"Content-Type\" : \"application/json\"\n            },\n            data: this.state.formdata\n        }\n        axios(option)\n        .then((response)=>{\n            if(response.data.code===200){\n                alert('Success')\n                this.props.history.push('/dashboard')\n            } else {\n                alert(response.data.message)\n            }\n        })\n        .catch((error)=>{\n            console.log(error);\n        })\n    }\n\n    getListMenu() {\n        //let token = localStorage.getItem(apiconfig.LS.TOKEN)\n        // let option = {\n        //     url: apiconfig.BASE_URL+apiconfig.ENDPOINTS.COMPANY,\n        //     method: \"get\",\n        //     headers: {\n        //         \"Authorization\": token\n        //     }\n        // }\n        // axios(option)\n        axios({method:'GET',url:apiconfig.BASE_URL+apiconfig.ENDPOINTS.MENU, headers:{\n            'Content-Type':'application/json',\n            'Accepted-Language':'application/json'\n        }})\n        .then((response)=>{\n            this.setState({\n                menu: response.data\n            })\n        })\n        .catch((error)=>{\n            console.log(error)\n        })\n    }\n\n    // componentWillMount(){\n    //     //this.loadData();\n    //     this.getListCompany()\n    // }\n\n    // componentDidMount(){\n    //     var self = this;\n \t// \t$('#mytable').dataTable({\n\t// \t  \"sPaginationType\": \"bootstrap\",\n\t// \t  \"bAutoWidth\": false,\n\t// \t  \"bDestroy\": true,\n\t// \t  \"fnDrawCallback\": function() {\n    //         \tself.forceUpdate();\n    //       },\n\t// \t});\n    // }\n\n    // componentDidUpdate(){\n    //     $('#mytable').dataTable({\n    //      \"sPaginationType\": \"bootstrap\",\n    //      \"bAutoWidth\": false,\n    //      \"bDestroy\": true,\n    //    });\n    // }\n\n    componentDidMount(){\n        this.getListMenu()\n    }\n\n    deleteHandler(param){\n        let token = localStorage.getItem(apiconfig.LS.TOKEN)\n        let option = {\n            url: apiconfig.BASE_URL+apiconfig.ENDPOINTS.COMPANY+'/'+param,\n            method: \"delete\",\n            headers: {\n                \"Authorization\": token\n            }\n        }\n        axios(option)\n        .then((response)=>{\n            let currentindex = -1\n            this.state.company.map((ele, idx)=>{\n                if(ele._id==param){\n                    currentindex=idx\n                    this.props.history.goBack()\n                }\n            })\n            let tmp=this.state.company\n            tmp.splice(currentindex,1)\n            this.setState({\n                company: tmp\n            })\n        })\n        .catch((error)=>{\n            console.log(error)\n        })\n    }\n\n    modalStatus(status, message) {\n        this.setState({\n            alertData : {\n                status : status,\n                message : message\n            },\n            showCreateMenu: false,\n            viewMenu : false,\n            editMenu : false,\n            deleteMenu : false\n        })\n        this.getListMenu()\n    }\n\n    render(){\n        const columns = [\"No\", \"Menu\", \"Path Menu\", \"Action\"];\n        const data=[]\n\n        this.state.menu.map(row =>\n            \n            {let tmp=[]\n                tmp.push(row.id,row.textMenu,row.pathMenu,<Link to='#'>\n                    <span onClick = {() => {this.viewModalHandler(row.id)}} className=\"fa fa-search\" style={{fontSize : '18px', paddingRight : '30px'}} />\n\n                    <span onClick = {() => {this.editModalHandler(row.id)}} class=\"fa fa-edit\" style={{fontSize : '18px', paddingRight : '30px'}} />\n\n                    <span onClick = {() => {this.deleteModalHandler(row.id)}} class=\"fa fa-trash\" style={{fontSize : '18px'}} />    \n                </Link>\n                )\n                data.push(tmp)\n            })\n\n            const options = {\n                filter: false,\n                responsive: \"scroll\",\n                print: false,\n                download: false,\n                selectableRows: false,\n                viewColumns: false,\n            };\n\n        return (\n            <div>\n            <div class=\"container\">\n                <h4>List Menu</h4>\n                {\n                    (this.state.alertData.status == 1) ? <Alert color =\"success\"> {this.state.alertData.message} </Alert>:''\n                }\n                {\n                    (this.state.alertData.status == 2) ? <Alert color =\"danger\"> {this.state.alertData.message} </Alert>: ''\n                }\n                    <button type=\"button\" class=\"btn btn-primary float-right\"\n                    onClick = {this.showHandler}><span class=\"fa fa-plus\"></span> Add </button>\n\n                    <CreateMenu\n                    create = {this.state.showCreateMenu}\n                    closeHandler={this.closeHandler} \n                    modalStatus = {this.modalStatus}\n                    />\n                    <ViewMenu\n                    view = {this.state.viewMenu}\n                    closeModalHandler = {this.closeModalHandler}\n                    menu = {this.state.currentMenu}\n                    />\n                    <DeleteMenu\n                    delete = {this.state.deleteMenu}\n                    menu = {this.state.currentMenu}\n                    closeModalHandler = {this.closeModalHandler}\n                    modalStatus = {this.modalStatus}\n                    />\n                    <EditMenu\n                    edit = {this.state.editMenu}\n                    closeModalHandler = {this.closeModalHandler}\n                    menutest = {this.state.currentMenu}\n                    modalStatus = {this.modalStatus}\n                    />\n                    <br/><br/>\n\n                    <MUIDataTables\n                        data={data}\n                        columns={columns}\n                        options={options}\n                    />\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default listMenu"]},"metadata":{},"sourceType":"module"}